<div class="container py-5">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2">Welcome back, {{ currentUser?.name }}!</h1>
        <div class="text-muted">
          <i class="fas fa-calendar-alt me-2"></i>
          {{ currentDate | date:'fullDate' }}
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="row mb-5">
    <div class="col-md-3 mb-3">
      <div class="card bg-primary text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h4 class="card-title">{{ stats.totalReservations }}</h4>
              <p class="card-text">Total Reservations</p>
            </div>
            <div class="align-self-center">
              <i class="fas fa-calendar-check fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card bg-success text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h4 class="card-title">{{ stats.activeReservations }}</h4>
              <p class="card-text">Active Reservations</p>
            </div>
            <div class="align-self-center">
              <i class="fas fa-check-circle fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card bg-info text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h4 class="card-title">{{ stats.totalProperties }}</h4>
              <p class="card-text">My Properties</p>
            </div>
            <div class="align-self-center">
              <i class="fas fa-home fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card bg-warning text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h4 class="card-title">{{ stats.unreadMessages }}</h4>
              <p class="card-text">Unread Messages</p>
            </div>
            <div class="align-self-center">
              <i class="fas fa-envelope fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="row mb-5">
    <div class="col-12">
      <h3 class="mb-4">Quick Actions</h3>
    </div>
    @if (authService.isOwner()) {
      <div class="col-md-4 mb-3">
        <div class="card h-100">
          <div class="card-body text-center">
            <i class="fas fa-plus-circle fa-3x text-primary mb-3"></i>
            <h5 class="card-title">Add Property</h5>
            <p class="card-text">List a new property for rent</p>
            <a routerLink="/add-property" class="btn btn-primary">Add Property</a>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="card h-100">
          <div class="card-body text-center">
            <i class="fas fa-list fa-3x text-success mb-3"></i>
            <h5 class="card-title">My Properties</h5>
            <p class="card-text">Manage your listed properties</p>
            <a routerLink="/my-properties" class="btn btn-success">View Properties</a>
          </div>
        </div>
      </div>
    } @else {
      <div class="col-md-4 mb-3">
        <div class="card h-100">
          <div class="card-body text-center">
            <i class="fas fa-search fa-3x text-primary mb-3"></i>
            <h5 class="card-title">Find Properties</h5>
            <p class="card-text">Search for your perfect rental</p>
            <a routerLink="/properties" class="btn btn-primary">Browse Properties</a>
          </div>
        </div>
      </div>
    }
    <div class="col-md-4 mb-3">
      <div class="card h-100">
        <div class="card-body text-center">
          <i class="fas fa-calendar fa-3x text-info mb-3"></i>
          <h5 class="card-title">Reservations</h5>
          <p class="card-text">View your reservations</p>
          <a routerLink="/reservations" class="btn btn-info">View Reservations</a>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card h-100">
        <div class="card-body text-center">
          <i class="fas fa-comments fa-3x text-warning mb-3"></i>
          <h5 class="card-title">Messages</h5>
          <p class="card-text">Check your messages</p>
          <a routerLink="/messages" class="btn btn-warning">View Messages</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="row">
    <div class="col-12">
      <h3 class="mb-4">Recent Activity</h3>
      <div class="card">
        <div class="card-body">
          @if (recentActivity.length === 0) {
            <div class="text-center py-4">
              <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
              <p class="text-muted">No recent activity</p>
            </div>
          } @else {
            <div class="list-group list-group-flush">
              @for (activity of recentActivity; track activity.id) {
                <div class="list-group-item d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="mb-1">{{ activity.title }}</h6>
                    <p class="mb-1 text-muted">{{ activity.description }}</p>
                    <small class="text-muted">{{ activity.date | date:'short' }}</small>
                  </div>
                  <span class="badge bg-{{ activity.type === 'success' ? 'success' : activity.type === 'warning' ? 'warning' : 'primary' }}">
                    {{ activity.status }}
                  </span>
                </div>
              }
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>